<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Azure AI Text Analytics</title>
</head>

<body>
    <main>
        <!DOCTYPE html>
        <html>

        <head>
            <title>Form Data</title>
        </head>

        <body>
            <form id="myForm">
                <label for="inputData">Data:</label>
                <input type="text" id="inputData" name="inputData">
                <button type="submit">Submit</button>
            </form>

            <table id="resultTable">
                <thead>
                    <tr>
                        <th>Language</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody id="resultBody"></tbody>
            </table>

            <script>
                document.getElementById("myForm").addEventListener("submit", function(event) {
                    event.preventDefault();
                    sendData();
                });

                async function sendData() {
                    const inputData = document.getElementById("inputData").value;
                    const response = await fetch('https://textfunctionapp.azurewebsites.net/api/languageDetectionFunc?code=0DeYDX1DnHxpUkO_jGNfBxd2NTgSUWjBLFUkEz4qgZnLAzFuok69qQ==', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            inputData
                        })
                    });

                    if (response.ok) {
                        const result = await response.json();
                        displayResult(result);
                    } else {
                        console.error('Error:', response.status);
                    }
                }

                function displayResult(result) {
                    const tableBody = document.getElementById("resultBody");

                    result.documents.forEach((document) => {
                        const row = document.createElement("tr");
                        const languageCell = document.createElement("td");
                        const scoreCell = document.createElement("td");

                        languageCell.textContent = document.detectedLanguages[0].name;
                        scoreCell.textContent = document.detectedLanguages[0].score;

                        row.appendChild(languageCell);
                        row.appendChild(scoreCell);
                        tableBody.appendChild(row);
                    });
                }
            </script>
        </body>

        </html>
    </main>


</body>

</html>